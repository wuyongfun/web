var body=jQuery("body"),st=0,lastSt=0,iconspin='<i class="mdi mdi-spin mdi-loading"></i> ',iconcheck='<i class="mdi mdi-check-bold"></i> ',iconwarning='<i class="mdi mdi-close"></i> ',browser={versions:function(){var t=navigator.userAgent;navigator.appVersion;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};function riplus_init(){var t=jQuery(".site-header").height();$(window).width()>1024&&($(window).scroll(function(){body.hasClass("navbar-sticky")&&window.requestAnimationFrame(navbar)}),jQuery(".container .content-area").theiaStickySidebar({additionalMarginTop:t+0}),jQuery(".container .widget-area").theiaStickySidebar({additionalMarginTop:t+0}),jQuery(".user-profile-warp .theia-sticky").theiaStickySidebar({additionalMarginTop:98})),$(".mnav-back").click(function(){location.href=document.referrer})}function riplus_toast_msg(t,e){Swal.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",Swal.stopTimer),t.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:t,title:e})}function select_pay_mode(t){Swal.fire({title:"请选择支付方式",html:riplus.pay_type_html.html,showConfirmButton:!1,width:300,showCloseButton:!0,onBeforeOpen:()=>{const e=Swal.getContent(),i=e.querySelector.bind(e),a=i("#alipay"),n=i("#weixinpay"),o=i("#paypal");a&&a.addEventListener("click",()=>{t.pay_type=riplus.pay_type_html.alipay,to_pay_data(t)}),n&&n.addEventListener("click",()=>{t.pay_type=riplus.pay_type_html.weixinpay,to_pay_data(t)}),o&&o.addEventListener("click",()=>{t.pay_type=riplus.pay_type_html.paypal,to_pay_data(t)})},onClose:()=>{}})}function to_pay_data(t){riplus_ajax(t,function(t){Swal.showLoading()},function(e){1==e.status?2==e.type?window.location.href=e.msg:3==e.type?"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",function(){onBridgeReady(e.msg)},!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",function(){onBridgeReady(e.msg)}),document.attachEvent("onWeixinJSBridgeReady",function(){onBridgeReady(e.msg)})):onBridgeReady(e.msg):(display_pay_qr(e.msg),check_pay_status(t.post_id,e.num)):Swal.fire("",e.msg,"info")},function(t){Swal.hideLoading()})}function onBridgeReady(t){WeixinJSBridge.invoke("getBrandWCPayRequest",JSON.parse(t),function(t){"get_brand_wcpay_request:ok"===t.err_msg?(riplus_toast_msg("success","支付成功"),setTimeout(function(){reload_this_href()},2e3)):(riplus_toast_msg("info","取消支付"),setTimeout(function(){location.reload()},2e3))})}function display_pay_qr(t){Swal.fire({html:t,showConfirmButton:!1,width:300,padding:"0",background:"rgb(224, 224, 224)",allowOutsideClick:!1,showCloseButton:!0,timer:3e5,timerProgressBar:!0,onClose:()=>{location.reload()}})}function check_pay_status(t,e){var i=setInterval(function(){$.post(riplus.ajaxurl,{action:"check_pay",num:e,post_id:t},function(t){1==t.status&&(clearInterval(i),Swal.fire({icon:"success",title:t.msg,showConfirmButton:!1,timer:2e3,timerProgressBar:!0,onClose:()=>{reload_this_href()}}))})},3e3)}function reload_this_href(){$.ajax({url:window.location.href,data:{},dataType:"html",async:!0,cache:!1,success:function(){location.reload()},error:function(){location.reload()}})}function navbar(){"use strict";st=jQuery(window).scrollTop();var t=jQuery(".site-header").height(),e=jQuery(".navbar-sticky");st>lastSt&&st>t?e.addClass("navbar-fixed"):e.removeClass("navbar-fixed"),lastSt=st}function getScrollbarWidth(){var t,e,i=document.createElement("div"),a={width:"100px",height:"100px",overflowY:"scroll"};for(t in a)i.style[t]=a[t];return document.body.appendChild(i),e=i.offsetWidth-i.clientWidth,i.remove(),e}function is_check_name(t){return/^[\w]{3,16}$/.test(t)}function is_check_mail(t){return/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/.test(t)}function is_weixin_view(){return!!browser.versions.mobile&&"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}function weixin_imgPreview(){for(var t=[],e=$("#article-content img"),i="",a="",n=0;n<e.length;n++)i=e.eq(n).attr("data-src"),a=e[n].src,t[n]=i||a;e.on("click",function(){var e=$(this).attr("data-src"),i=$(this).attr("src");WeixinJSBridge.invoke("imagePreview",{urls:t,current:e||i})})}function riplus_ajax(t,e,i,a){i=i||function(t){console.log(t),setTimeout(function(){Swal.fire(t.msg,"","success")},500)};var n=n||function(t){404==t.status?Swal.fire("请求失败，请求未找到","","info"):503==t.status?Swal.fire("请求失败，服务器内部错误","","info"):Swal.fire("配置异常",t.responseText,"info")},o=(e=e||function(t){},o||function(t){console.log("加载完成 complete ")});$.ajax({url:riplus.ajaxurl,data:t,type:"post",dataType:"json",async:!0,success:i,error:n,beforeSend:e,complete:o})}function post_video(){if(browser.versions.mobile)return!1;$(document).on("mouseenter mouseleave",".post-video .entry-media",function(t){var e=$(this).find(".show-image"),i=$(this).find("video");if("mouseenter"==t.type){if(i.trigger("pause"),i.length<=0)return;e.hide(),i.show();var a=i.attr("data-src");i.attr("src",a)}else"mouseleave"==t.type&&i.trigger("pause"),i.hide(),e.show()})}function RiPlus_imgPreview(){if(0==riplus.is_lightgallery)return!1;for(var t=[],e=$("#article-content img"),i="",a="",n="",o=0;o<e.length;o++)i=e.eq(o).attr("data-src"),n=e.eq(o).attr("alt")||document.title,a=e[o].src,e.eq(o).attr("data-index",o),t.push({src:i||a,thumb:i||a,subHtml:"<h4>"+n+"</h4>"});e.on("click",function(e){e.preventDefault();var i=$(this).data("index");$(this).lightGallery({dynamic:!0,dynamicEl:t,download:!1,share:!1}).data("lightGallery").index=i})}!function(t){"use strict";riplus_init(),post_video(),is_weixin_view()?weixin_imgPreview():RiPlus_imgPreview(),t('[data-toggle="tooltip"]').tooltip(),t(".back-to-top").click(function(){t("html, body").animate({scrollTop:0},1e3)}),t(".home-owl.owl-1").owlCarousel({animateOut:"fadeOut",autoplay:1,autoplaySpeed:1200,loop:!0,dots:!0,items:1,nav:!1,navText:""}),t(".home-owl.owl-2").owlCarousel({animateOut:"fadeOut",autoplay:0,autoplaySpeed:800,loop:!0,dots:!0,items:1,nav:1,navText:['<i class="mdi mdi-chevron-left"></i>','<i class="mdi mdi-chevron-right"></i>']}),t("body").on("click","[data-action]",function(e){e.preventDefault();var i=t(this),a=i.data("action"),n=i.data("target"),o=getScrollbarWidth();switch(a){case"omnisearch-open":n=i.data("target"),i.addClass("active"),t(n).addClass("show"),t(n).find(".form-control").focus(),t("body").addClass("omnisearch-open").append('<div class="mask-body mask-body-dark" data-action="omnisearch-close" data-target="'+n+'" />'),t("body").css("padding-right",o+"px");break;case"omnisearch-close":n=i.data("target"),t('[data-action="search-open"]').removeClass("active"),t(n).removeClass("show"),t("body").removeClass("omnisearch-open").find(".mask-body").remove(),t("body").css("padding-right","0px")}}),t(".search-ajax-input").bind("input propertychange",function(e){var i=t(".search-ajax-input").val(),a=t(".omnisearch-suggestions .heading");i&&(a.html('数据加载中... <div class="spinner-border spinner-border-sm text-primary" role="status"><span class="sr-only">Loading...</span></div>'),t.post(riplus.ajaxurl,{action:"ajax_search",text:i},function(e){var n=t("#search-ajax-res");if(a.html("[ "+i+" ]的搜索结果："),0==e.length)n.empty().show().append('<li class="text-muted"><a>没有搜到相关内容，切换关键词试试。</a></li>');else{n.empty().show();for(var o=0;o<e.length;o++)n.append('<li><a target="_blank" class="list-link" href="'+e[o].url+'"><i class="mdi mdi-orbit"></i>'+e[o].title+"<span> "+e[o].time+"</span></a></li>")}})),t(document).click(function(e){var i=t(".home-search-results");i.is(e.target)||0!==i.has(e.target).length||i.hide()})}),t(document).on("click",".go-login",function(e){e.preventDefault();var i=t(this),a=i.text(),n=t("input[name='username']").val(),o=t("input[name='password']").val(),s=(a=i.text(),document.location.href.split("redirect_to=")[1]||riplus.home_url+"/user");if(i.html(iconspin+a),!n||!o)return riplus_toast_msg("info","请输入用户名或密码"),void setTimeout(function(){i.html(a)},2e3);t.post(riplus.ajaxurl,{action:"user_login",username:n,password:o,rememberme:1},function(t){1==t.status?(riplus_toast_msg("success",t.msg),setTimeout(function(){window.location.href=decodeURIComponent(s)},1e3)):(riplus_toast_msg("info",t.msg),setTimeout(function(){i.html(a)},2e3))})}),t(document).on("click",".go-register",function(e){e.preventDefault();var i=t(this),a=i.text(),n=t("input[name='user_name']").val(),o=t("input[name='user_email']").val(),s=t("input[name='user_pass']").val(),r=t("input[name='user_pass2']").val(),l=t("input[name='email_verify_code']").val();return i.html(iconspin+a),is_check_name(n)?is_check_mail(o)?void t.post(riplus.ajaxurl,{action:"user_register",user_name:n,user_email:o,user_pass:s,user_pass2:r,email_verify_code:l},function(t){1==t.status?(riplus_toast_msg("success",t.msg),setTimeout(function(){window.location.href=riplus.home_url+"/user"},1e3)):(riplus_toast_msg("info",t.msg),setTimeout(function(){i.html(a)},2e3))}):(riplus_toast_msg("info","邮箱格式错误"),void setTimeout(function(){i.html(a)},2e3)):(riplus_toast_msg("info","用户名格式错误"),void setTimeout(function(){i.html(a)},2e3))}),t(document).on("click",".go-send-email-code",function(e){var i=t(this),a=i.text(),n=t("input[name='user_email']").val();if(i.html(iconspin+a),i.attr("disabled","true"),!is_check_mail(n))return riplus_toast_msg("info","邮箱错误"),setTimeout(function(){i.html(a),i.removeAttr("disabled")},2e3),!1;t.post(riplus.ajaxurl,{action:"send_email_verify_code",user_email:n},function(e){1==e.status?(riplus_toast_msg("success","发送成功"),setTimeout(function(){t("input[name='email_verify_code']").removeAttr("disabled"),i.html(a)},2e3)):(riplus_toast_msg("info",e.msg),setTimeout(function(){i.html(a),i.removeAttr("disabled")},2e3))})}),t(document).on("click",".go-bind-email",function(e){e.preventDefault();var i=t(this),a=i.text(),n=t("input[name='user_email']").val(),o=t("input[name='email_verify_code']").val();i.html(iconspin+a),i.attr("disabled","true"),t.post(riplus.ajaxurl,{action:"user_bind_email",email_verify_code:o,user_email:n},function(t){1==t.status?(riplus_toast_msg("success",t.msg),setTimeout(function(){window.location.href=riplus.home_url+"/user"},1e3)):(riplus_toast_msg("info",t.msg),setTimeout(function(){i.html(a),i.removeAttr("disabled")},2e3))})}),t("#addPic").change(function(e){var i=t(this).data("nonce"),a=e.currentTarget.files[0],n=new FormData;n.append("nonce",i),n.append("action","update_avatar_photo"),n.append("file",a),t.ajax({url:riplus.ajaxurl,type:"POST",cache:!1,data:n,processData:!1,contentType:!1}).done(function(t){1==t.status?(riplus_toast_msg("success",t.msg),setTimeout(function(){location.reload()},1e3)):riplus_toast_msg("info",t.msg)}).fail(function(t){riplus_toast_msg("info","网络错误")})}),t("#save-userinfo").on("click",function(e){e.preventDefault();var i=t(this),a=i.html(),n=i.data("nonce"),o=t("input[name='nickname']").val(),s=t("input[name='qq']").val(),r=t("textarea[name='description']").val(),l="success";i.html(iconspin+"提交中..."),t.post(riplus.ajaxurl,{action:"seav_userinfo",nonce:n,nickname:o,qq:s,description:r},function(t){1==t.status?riplus_toast_msg(l,t.msg):l="info",riplus_toast_msg(l,t.msg),i.html(a),setTimeout(function(){location.reload()},2e3)})}),t(".go-unset-open").on("click",function(e){e.preventDefault();var i=t(this),a=i.html(),n=i.data("type");i.html(iconspin+"解绑中..."),t.post(riplus.ajaxurl,{action:"unset_open_login",type:n},function(t){1==t.status?riplus_toast_msg("success",t.msg):riplus_toast_msg("info",t.msg),i.html(a),setTimeout(function(){location.reload()},2e3)})}),t("#update-password").on("click",function(e){e.preventDefault();var i=t(this),a=i.html(),n=i.data("nonce"),o=t("input[name='old_password']").val(),s=t("input[name='new_password']").val(),r=t("input[name='new_password2']").val();i.html(iconspin+"修改中..."),t.post(riplus.ajaxurl,{action:"updete_password",nonce:n,old_password:o,new_password:s,new_password2:r},function(t){1==t.status?(riplus_toast_msg("success",t.msg),setTimeout(function(){location.reload()},2e3)):riplus_toast_msg("info",t.msg),i.html(a)})}),t(".click-pay-post").on("click",function(){var e=t(this);e.html();select_pay_mode({action:"go_post_pay",post_id:e.data("postid"),pay_type:0,nonce:e.data("nonce")})}),t(".pay-vip-item").on("click",function(){var e=t(this),i=e.data("type"),a=e.data("price"),n=e.find(".vip-title").html(),o=e.find(".vip-text").html(),s=t("#go-pay-vip"),r=t("#the-user"),l=r.data("type"),c=(r.data("time"),["no_vip","month_vip","year_vip","permanent_vip"]);s.removeAttr("disabled");var u="【开通】";switch(u=l==i?"【续费】":"【开通】",i==c[0]?(u="",s.attr("disabled","true"),s.html("请选择开通套餐")):s.html("立即开通"),l){case c[1]:i==c[1]?s.html("立即续费"):s.html("立即升级");break;case c[2]:i==c[2]?s.html("立即续费"):i==c[3]?s.html("立即升级"):(u="",s.attr("disabled","true"),s.html("您已拥有该特权"));break;case c[3]:u="",s.html("您已开通永久VIP会员"),s.attr("disabled","true")}e.parents(".row").find(".col-md-3 .pay-vip-item").removeClass("ok"),e.addClass("ok"),t("#vip-day-note").html(u+" "+n+" <u>"+o+"</u>"),t("#vip-price-note").html("应付金额 <u>"+a+"元</u>"),s.data("price",a),s.data("type",i)}),t(".go-pay-vip").on("click",function(){var e=t(this);e.html();select_pay_mode({action:"go_vip_pay",vip_type:e.data("type"),pay_type:0,nonce:e.data("nonce")})}),t(".go-star-btn").on("click",function(){var e=t(this),i=e.html(),a=e.data("id"),n="success";e.html(iconspin),t.post(riplus.ajaxurl,{action:"go_start_post",post_id:a},function(t){1==t.status?e.toggleClass("ok"):n="info",riplus_toast_msg(n,t.msg),e.html(i)})}),t(".go-star-btn2").on("click",function(){var e=t(this),i=e.html(),a=e.data("id"),n="success";e.html(iconspin+"正在请求..."),t.post(riplus.ajaxurl,{action:"go_start_post",post_id:a},function(t){1==t.status?(e.toggleClass("btn-outline-warning"),e.toggleClass("btn-outline-danger"),e.hasClass("btn-outline-danger")?e.html('<i class="mdi mdi-star"></i> 取消收藏'):e.html('<i class="mdi mdi-star"></i> 收藏')):(n="info",e.html(i)),riplus_toast_msg(n,t.msg)})}),t(".go-copy").on("click",function(){t(this).html();var e=new ClipboardJS(".go-copy");e.on("success",function(t){t.clearSelection(),riplus_toast_msg("success","复制成功")}),e.on("error",function(t){riplus_toast_msg("info","复制失败")})}),t(".go-poster-img").on("click",function(){var e=t(this),i=e.html(),a=e.data("id"),n=document.title||"";e.html(iconspin+"正在生成..."),t.post(riplus.ajaxurl,{action:"go_get_poster",post_id:a},function(t){e.html(i),1==t.status?Swal.fire({html:'<img class="swal2-image poser" src="'+t.msg+'"><a class="btn btn-sm btn-outline-info" href="'+t.msg+'" download="'+n+'-海报"><i class="mdi mdi-arrow-collapse-down"></i> 下载封面</a>',width:350,showCancelButton:!1,showConfirmButton:!1,showCloseButton:!0}):Swal.fire(t.msg,"","info")})}),t(".go-share").on("click",function(e){var i=t(".tap-logo").attr("src");t(".article-content img:first").length&&(i=t(".article-content img:first").attr("src"));var a=document.URL,n=i,o=document.title||"",s=t('meta[name="description"]').length?t('meta[name="description"]').attr("content"):"",r=t(this),l="";switch(r.data("share")){case"weixin":return void Swal.fire({html:'<div class="qrcon"><br><br><div align="center" class="qrcode"><p>在微信中请长按二维码</p> <img src="'+r.data("qr")+'"> </div> <div class="bottom weixinpay"><i class="mdi mdi-wechat"></i> 使用手机扫码查看</div> </div>',showConfirmButton:!1,width:300,padding:"0",background:"rgb(224, 224, 224)",showCloseButton:!0});case"qq":l="http://connect.qq.com/widget/shareqq/index.html?url="+a+"&desc="+s+"&summary="+o+"&site="+riplus.site_name+"&pics="+n;break;case"weibo":l="http://service.weibo.com/share/share.php?title="+o+"&url="+a+"&source=bookmark&pic="+n}r.attr("href")||r.attr("target")||r.attr("href",l).attr("target","_blank")}),t(".go-tixian").on("click",function(){var e=t(this),i=(e.html(),e.data("price"));Swal.fire({title:"可提现佣金："+i+"元",text:"您将提现"+i+"元，确认后请联系本站客服发送收款信息，工作人员会在12小时内处理提现，为方便工作人员联系您，请在个人信息填写您的QQ号码",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确认提现",cancelButtonText:"取消"}).then(e=>{e.value&&t.post(riplus.ajaxurl,{action:"go_tixian"},function(t){1==t.status?(Swal.fire(t.msg,"","success"),setTimeout(function(){location.reload()},1e3)):Swal.fire(t.msg,"","info")})})})}(jQuery),$("body").on("click","[data-action]",function(t){t.preventDefault();var e=$(this),i=e.html(),a=e.data("action"),n=e.data("cat"),o=e.data("paged");"get-post-item"==a&&(e.parents(".sub-nav").find("a").removeClass("current"),e.addClass("current"),e.html(iconspin+i),$.post(riplus.ajaxurl,{action:"ajax_post_item",cat:n,paged:o},function(t){console.log(t),e.parents(".container").find(".posts-wrapper").html(t),e.html(i)}))});